
@model RedTeam.Models.CarSimulator


@{
    ViewBag.Title = "Car Simulator";
}

<h2>Car Simulator</h2>
<div class="">
    <input type="checkbox" checked="@Model.doorLock" id="doorlock" />
   
</div> 
<div class="container">
    <h2 class="h5">Current Speed</h2>
    <input type="text" id="currentSpeed" />
    <input type="button" id="updateSpeed" value="Update" />
    
    <ul id="logmessage"></ul>
</div>
<div class="container">
    <h2 class="h5">Current Gas Level</h2>
    <input type="text" id="currentGasLevel" />
    <input type="button" id="updateGas" value="Update" />

    <ul id="gaslogmessage"></ul>
</div>
@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.1.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var carSimulator = $.connection.carSimulatorHub;
            // Create a function that the hub can call back to display messages.
            carSimulator.client.doorLock = function (locked) {
                $("#doorlock").prop('checked', locked);
                

            };
 

            //$('#currentSpeed').val(prompt('The car is currently traveling:', ''));
            $.connection.hub.start().done(function () {
                $('#updateSpeed').click(function () {
                    // Call the Send method on the hub. 
                    carSimulator.server.sendSpeed($('#currentSpeed').val());
                    // Clear text box and reset focus for next comment. 
                    // Html encode display name and message. 
                    var encodedspeed = $('<div />').text($('#currentSpeed').val()).html();

                    // Add the message to the page. 
                    $('#logmessage').append('<li><strong>' + 'Car current speed is: ' + encodedspeed + ' Mph' + '</li>');
                    //$('#logmessage').append('<li><strong>' + 'Car current speed' + encodedspeed + '</li>');

                });
                $.connection.hub.start().done(function () {
                    $('#updateGas').click(function () {
                        // Call the Send method on the hub. 
                        carSimulator.server.sendGas($('#currentGasLevel').val());
                        // Clear text box and reset focus for next comment. 
                        // Html encode display name and message. 
                        var encodedgas = $('<div />').text($('#currentGasLevel').val()).html();

                        // Add the message to the page. 
                        $('#gaslogmessage').append('<li><strong>' + 'Car current gas level is: ' + encodedgas + ' gallons' + '</li>');
                        //$('#logmessage').append('<li><strong>' + 'Car current speed' + encodedspeed + '</li>');

                    });
            });


            $.connection.hub.start();
        });
        
        
   </script>
}



